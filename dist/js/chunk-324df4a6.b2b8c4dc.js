(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-324df4a6"],{"0180":function(e,t,r){},4591:function(e,t,r){"use strict";r("0180")},f3c9:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.pageLoading,expression:"pageLoading"}],staticClass:"home-wrapper"},[r("el-button",{staticClass:"btn-add",attrs:{type:"primary"},on:{click:function(t){return e.addPrimarymenu()}}},[e._v("新增课程")]),r("div",{staticClass:"newContent"},[r("el-table",{attrs:{data:e.courseList}},[r("el-table-column",{attrs:{width:"100px",type:"index",align:"center",label:"序号"}}),r("el-table-column",{attrs:{width:"200px",align:"center",prop:"courseName",label:"课程名"}}),r("el-table-column",{attrs:{width:"200px",align:"center",prop:"courseImg",label:"课程图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticClass:"courseImg",attrs:{src:e.row.courseImg,alt:""}})]}}])}),r("el-table-column",{attrs:{width:"150px",align:"center",prop:"teacher",label:"讲师"}}),r("el-table-column",{attrs:{width:"200px",align:"center",prop:"promotionUrl",label:"宣传片"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{underline:!1,href:t.row.promotionUrl}},[e._v(e._s(t.row.promotionUrl))])]}}])}),r("el-table-column",{attrs:{prop:"action",align:"center",label:"详情",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.link?e._e():r("span",{staticClass:"text-link",on:{click:function(r){return e.setting(t.row.id)}}},[e._v("查看详情")])]}}])}),r("el-table-column",{attrs:{prop:"action",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{staticClass:"text-link",on:{click:function(r){return e.modifyMenu(t.row)}}},[e._v("修改")]),r("span",{staticClass:"text-link",on:{click:function(r){return e.delCourse(t.row.id)}}},[e._v("删除")])]}}])})],1),0!==e.pageTotal?r("div",{staticClass:"page-box"},[r("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.pageTotal,"current-page":e.pageNumber,"page-size":e.pageSize},on:{"current-change":e.handleCurrentPageChange,"update:currentPage":function(t){e.pageNumber=t},"update:current-page":function(t){e.pageNumber=t}}})],1):e._e()],1),[r("el-dialog",{attrs:{title:e.menuTitle,visible:e.addPrimarymenuVisible,"modal-append-to-body":!1,width:"500px"},on:{"update:visible":function(t){e.addPrimarymenuVisible=t}}},[r("el-form",{ref:"course_form",attrs:{model:e.course_form,rules:e.rulePrimary}},[r("el-form-item",{attrs:{label:"课程名","label-width":"120px",prop:"course_name"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.course_form.course_name,callback:function(t){e.$set(e.course_form,"course_name",t)},expression:"course_form.course_name"}})],1),r("el-form-item",{attrs:{label:"课程封面图","label-width":"120px",prop:"course_img"}},[r("el-upload",{staticClass:"upload-demo",attrs:{multiple:"",action:"",limit:1,accept:".png,.jpg",disabled:e.isDisabled,"before-upload":e.beforeAvatarUpload,"http-request":e.handleUpload}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e.percentage<100&&e.percentage>0?r("el-progress",{attrs:{percentage:e.percentage}}):e._e(),100==e.percentage?r("el-progress",{attrs:{percentage:e.percentage,status:"success"}}):e._e()],1)],1),r("el-form-item",{attrs:{label:"讲师","label-width":"120px",prop:"teacher"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.course_form.teacher,callback:function(t){e.$set(e.course_form,"teacher",t)},expression:"course_form.teacher"}})],1),r("el-form-item",{attrs:{label:"讲师个人介绍","label-width":"120px",prop:"teacher"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.course_form.lecturerResume,callback:function(t){e.$set(e.course_form,"lecturerResume",t)},expression:"course_form.lecturerResume"}})],1),r("el-form-item",{attrs:{label:"课程类别","label-width":"120px",prop:"teacher"}},[r("el-cascader",{attrs:{options:e.classfiyList,"show-all-levels":!1},on:{change:e.handleChange},model:{value:e.course_form.classfiy,callback:function(t){e.$set(e.course_form,"classfiy",t)},expression:"course_form.classfiy"}})],1),r("el-form-item",{attrs:{label:"宣传片","label-width":"120px",prop:"url"}},[r("el-upload",{staticClass:"upload-demo",attrs:{multiple:"",action:"",limit:1,accept:".mp4,MP4,.wmv",disabled:e.isDisabledUrl,"before-upload":e.beforeAvatarUploadUrl,"http-request":e.handleUploadUrl}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e.percentageUrl<100&&e.percentageUrl>0?r("el-progress",{attrs:{percentage:e.percentageUrl}}):e._e(),100==e.percentageUrl?r("el-progress",{attrs:{percentage:e.percentageUrl,status:"success"}}):e._e()],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addPrimarymenuVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitcourse_form("course_form")}}},[e._v("确 定")])],1)],1)]],2)},o=[],s=(r("b0c0"),r("a474")),i=r("587c"),n=r.n(i),l={data:function(){return{pageLoading:!1,classfiyList:[],totalList:[],courseList:[],course_form:{url:"",course_img:"",classfiy:""},rulePrimary:{course_name:[{required:!0,message:"请输入内容",trigger:"blur"}],teacher:[{required:!0,message:"请输入内容",trigger:"blur"}]},addPrimarymenuVisible:!1,menuTitle:"添加课程",percentage:0,percentageUrl:0,originName:"",originSize:"",uploadFail:!1,uploadFailUrl:!1,isDisabled:!1,isDisabledUrl:!1,isLoad:0,pageTotal:0,pageNumber:1,pageSize:10}},mounted:function(){this.getCourseList(),this.getClassfiy()},methods:{getCourseList:function(){var e=this;Object(s["h"])().then((function(t){e.pageTotal=t.length;for(var r=[],a=0;a<t.length;a++)a%10==0&&(e.totalList.push(r),r=[]),r.push(t[a]);r.length>0&&e.totalList.push(r),e.courseList=e.totalList[1],e.courseList=t}))},handleCurrentPageChange:function(e){this.courseList=this.totalList[e]},getClassfiy:function(){var e=this;Object(s["g"])().then((function(t){var r=[];t.sort((function(e,t){return e.depth-t.depth}));for(var a=0;a<t.length;a++){var o={};if(1==t[a].depth)o.children=[],o.value=t[a].id,o.label=t[a].name,r.push(o);else if(2==t[a].depth)for(var s=0;s<r.length;s++)r[s].value==t[a].parentId&&(o.children=[],o.value=t[a].id,o.label=t[a].name,r[s].children.push(o));else if(3==t[a].depth)for(var i=0;i<r.length;i++)for(var n=0;n<r[i].children.length;n++)r[i].children[n].value==t[a].parentId&&(o.value=t[a].id,o.label=t[a].name,r[i].children[n].children.push(o))}for(var l=0;l<r.length;l++)if(0==r[l].children.length)delete r[l].children;else for(var c=0;c<r[l].children.length;c++)0==r[l].children[c].children.length&&delete r[l].children[c].children;e.classfiyList=r,console.log(e.classfiyList)}))},handleChange:function(e){this.course_form.classfiy=e[e.length-1]},addPrimarymenu:function(){this.menuTitle="新增课程",this.addPrimarymenuVisible=!0},submitcourse_form:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;if("新增课程"==t.menuTitle){if(""==t.course_form.url)return t.$message.error("未上传宣传片"),!1;if(""==t.course_form.course_img)return t.$message.error("未上传封面"),!1;if(""==t.course_form.classfiy)return t.$message.error("未选择类别"),!1;Object(s["m"])(t.course_form).then((function(e){t.$message.success("新增成功"),t.addPrimarymenuVisible=!1}))}}))},delCourse:function(e){var t=this;this.$confirm("确定要删除吗？ 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])({id:e}).then((function(e){t.$message.success("删除成功"),t.getcourseList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},modifyMenu:function(e){this.course_form.name=e.name,this.course_form.id=e.id,this.menuTitle="修改菜单",this.addPrimarymenuVisible=!0},setting:function(e){this.$router.push({path:"/menu",query:{id:e}})},handleUpload:function(e){var t=this,r=e.file;if(r){this.originName=r.name,this.originSize=r.size;var a=new n.a({SecretId:"AKIDJMAi01oGSOJ0RUAwIWXZR4QWLvEInxSi",SecretKey:"MtUpxsY7RdaIju23oKgmcokqhHo67C3h"});a.putObject({Bucket:"examplecourse-1304676805",Region:"ap-chengdu",Key:"course/".concat(this.originName),Body:r,onProgress:function(e){t.percentage=parseInt(100*e.percent),t.isDisabled=!0}},(function(e,r){console.log(e||r),r&&r.Location&&200==r.statusCode&&(t.course_form.course_img="https://".concat(r.Location),console.log(t.course_form),t.isLoad=1),e&&layer.msg("上传文件失败",{icon:2,time:1200,shade:.5}),t.isDisabled=!1,t.uploadFail=!0}))}},handleUploadUrl:function(e){var t=this,r=e.file;if(r){this.originName=r.name,this.originSize=r.size;var a=new n.a({SecretId:"AKIDJMAi01oGSOJ0RUAwIWXZR4QWLvEInxSi",SecretKey:"MtUpxsY7RdaIju23oKgmcokqhHo67C3h"});a.putObject({Bucket:"examplecourse-1304676805",Region:"ap-chengdu",Key:"course/".concat(this.originName),Body:r,onProgress:function(e){t.percentageUrl=parseInt(100*e.percent),t.isDisabledUrl=!0}},(function(e,r){console.log(e||r),r&&r.Location&&200==r.statusCode&&(t.course_form.url="https://".concat(r.Location),t.isLoad=1),e&&layer.msg("上传文件失败",{icon:2,time:1200,shade:.5}),t.isDisabledUrl=!1,t.uploadFailUrl=!0}))}},beforeAvatarUpload:function(e){this.uploadFile=e,this.uploadFileName=e.name;var t=e.size<=1024e3;return t||this.$message.error("上传文件大小不能超过 1MB!"),t},beforeAvatarUploadUrl:function(e){this.uploadFile=e,this.uploadFileName=e.name;var t=e.size/1024/1024<=102400;return t||this.$message.error("上传文件大小不能超过 1GB!"),t}}},c=l,u=(r("4591"),r("2877")),p=Object(u["a"])(c,a,o,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-324df4a6.b2b8c4dc.js.map